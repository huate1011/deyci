"use strict";function getTopData(t,e){if(e.detail.value){t.setData({Top:1});util.httpRequest("/api/CarCommon/getTop",{},"GET","v2").then(function(e){var a=[],n=[];e.results.forEach(function(t,o){a.push(e.results[o].topName),n.push({money:e.results[o].topMoney,id:e.results[o].id})}),t.setData({arraytime:a,arrmoney:n})})}else t.setData({Top:0})}function getList(t,e){var a=t.state.condition;a.offset=e,a.limit=t.state.limit,util.httpRequest("/api/CarPublish/get",a,"POST","v2").then(function(a){if("success"===a.result){var n=common.dataListHandle(t,a,t.data.list,e);t.setData({list:n.list,requestStatus:!0,hasNext:n.hasNext})}else common.showClickModal(a.msg);wx.hideLoading()})}function getconfiger(t,e){util.httpRequest("/api/CarCommon/getConfig",{},"GET","v2").then(function(t){e(t)})}function navbarTap(t,e){var a=e.currentTarget.dataset.idx;if(Number(a)!==Number(t.data.currentTab)){wx.showLoading({title:"加载中...",mask:!0}),t.setData({currentTab:a,list:[],requestStatus:!1});var n={publishType:a,startPoint:"",endPoint:"",startTimeStart:"",startTimeEnd:"",viaPoint:"",peopleNum:""};t.state.condition=n,t.state.offset=0,getList(t,0)}}function carEventCheng(t,e){var a=e.currentTarget.dataset;if("calling"===a.types){var n=a.index;common.phoneCall(t.data.list[n].mobile)}else"navbarTap"===a.types&&navbarTap(t,e)}function carEvent(t){carEventCheng(this,t)}function getData(t){dataTemp.getBanner(t,"car"),getList(t,0),common.commonFun(t),t.carEvent=carEvent;util.httpRequest("/api/notice/GetNotice?typeId=1&applyId=29",{},"GET","v2").then(function(e){if("success"===e.result&&(t.setData({gg_content:e.data.title}),e.data.title)){wx.getSystemInfoSync().windowWidth;wx.createSelectorQuery().select("#txt1").boundingClientRect(function(e){if(e&&e.hasOwnProperty("width")){console.log(e.width);var a=.04*e.width;console.log(a),t.setData({duration:a})}}).exec()}})}function carDataSet(t){t.setData({navbar:["全部","人找车","车找人"],configs:[],Notice:"",peise:getApp().globalData.peise,requestStatus:!1,alterRequestStatus:!0,logoPosBottom:!0}),t.state.condition={}}var util=getApp().globalData.utilFun,common=getApp().globalData.commonFun,dataTemp=getApp().globalData.dataTempFun;module.exports={getData:getData,carEventCheng:carEventCheng,getconfiger:getconfiger,getTopData:getTopData,getList:getList,carDataSet:carDataSet};