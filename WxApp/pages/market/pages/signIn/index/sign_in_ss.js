"use strict";var util=getApp().globalData.utilFun,yang_date={bulidCal:function(t,a,e,n){var e=e,o=new Array;o[0]=new Array(7),o[1]=new Array(7),o[2]=new Array(7),o[3]=new Array(7),o[4]=new Array(7),o[5]=new Array(7);var i=new Date(t,a-1,1),r=i.getDay(),m=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();console.log("本月共有 "+m+" 天"),console.log("本月第一天周 "+r);var d,g,y=t,l=1;for(d=r;d<7;d++){var s=e.data.showYear+"-"+e.data.showMonth;if(Number(l)<10?s+="-0"+l:s+="-"+l,n[s]){var f=util.formatTimeStamp(n[s].date),u=util.formatTimeStamp(util.getFormatDate1(new Date));f-u<0?o[0][d]={signIn:!0,normalday:l,gift:n[s].gift,date:n[s].date,cmoney:n[s].cmoney,point:n[s].point}:0==Number(f-u)&&1===Number(e.data.data.my.status)?o[0][d]={signIn:!0,normalday:l,gift:n[s].gift,date:n[s].date,cmoney:n[s].cmoney,point:n[s].point}:o[0][d]={signIn:!1,normalday:l,gift:n[s].gift,date:n[s].date,cmoney:n[s].cmoney,point:n[s].point}}else o[0][d]={signIn:!1,normalday:l,gift:0,cmoney:0,point:e.data.data.glist.every};l++}for(g=1;g<6;g++)for(d=0;d<7;d++)if(l<=y){var p=e.data.showYear+"-"+e.data.showMonth;if(Number(l)<10?p+="-0"+l:p+="-"+l,n[p]){var c=util.formatTimeStamp(n[p].date),w=util.formatTimeStamp(util.getFormatDate1(new Date));c-w<0?o[g][d]={signIn:!0,normalday:l,gift:n[p].gift,date:n[p].date,cmoney:n[p].cmoney,point:n[p].point}:0==Number(c-w)&&1===Number(e.data.data.my.status)?o[g][d]={signIn:!0,normalday:l,gift:n[p].gift,date:n[p].date,cmoney:n[p].cmoney,point:n[p].point}:o[g][d]={signIn:!1,normalday:l,gift:n[p].gift,date:n[p].date,cmoney:n[p].cmoney,point:n[p].point}}else o[g][d]={signIn:!1,normalday:l,gift:0,cmoney:0,point:e.data.data.glist.every};if(l==m)return console.log(o),e.setData({signDays:o}),o;l++}return o}};module.exports={yang_date:yang_date};