"use strict";var common=getApp().globalData.commonFun;Component({properties:{data:{type:Object,value:{},observer:function(t,e){this.resetRight(t)}},myCity:{type:String,value:"定位"},search:{type:String,value:"",observer:function(t,e){console.log(t),this.value=t,this.searchMt()}}},data:{list:[],rightArr:[],jumpNum:"",myCityName:"请选择"},ready:function(){var t=this.data.data;this.resetRight(t),this.getCity()},methods:{resetRight:function(t){var e=[];for(var i in t)e.push(t[i].title.substr(0,1));this.setData({list:t,rightArr:e})},getCity:function(){var t=this;common.currentLocation(0,function(e){t.latitude=e.latitude,t.longitude=e.longitude,t.locationMt()})},jumpMt:function(t){var e=t.currentTarget.dataset.id;this.setData({jumpNum:e})},detailMt:function(t){var e=t.currentTarget.dataset.detail,i={bubbles:!1,composed:!1,capturePhase:!1};this.triggerEvent("detail",e,i)},input:function(t){this.value=t.detail.value},searchMt:function(){this._search()},_search:function(){console.log("搜索");for(var t=this.data.data,e=[],i=0;i<t.length;i++){for(var a=[],n=0;n<t[i].item.length;n++)if(t[i].item[n].name.indexOf(this.value)>-1){var s={};for(var o in t[i].item[n])s[o]=t[i].item[n][o];a.push(s)}0!==a.length&&e.push({title:t[i].title,type:t[i].type?t[i].type:"",item:a})}this.resetRight(e)},locationMt:function(t){console.log(this.latitude+"-"+this.longitude);var e=this;common.conversionAddress(e.latitude,e.longitude,function(t){e.setData({myCity:t.result.address_component.city,city:{name:t.result.address_component.city}})})}}});