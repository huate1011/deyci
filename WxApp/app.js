"use strict";require("utils/wx-pro.js");var aldstat=require("./utils/ald-stat.js"),util=require("utils/util.js"),common=require("utils/common.js");App({checkToken:!1,onLaunch:function(e){this.checkToken=!0,wx.setStorageSync("authALter",0)},onShow:function(e){var o=this;if(wx.getSystemInfo({success:function(e){console.log(e.model),-1!=e.model.indexOf("iPhone")&&(o.globalData.phoneModal={isIphone:!0});var n=e.SDKVersion;"1.0.0"!=n&&"1.0.1"!=n&&void 0!=n||wx.showModal({title:"提示",content:"当前微信版本过低，请升级至高版本",showCancel:!1})}}),wx.canIUse("getUpdateManager")){var n=wx.getUpdateManager();n.onCheckForUpdate(function(e){console.log(e)}),n.onUpdateReady(function(){console.log("新的版本已经下载好"),n.applyUpdate()})}var t=common.getExtConfig();console.log(t),wx.setStorageSync("acid",t.acid),common.setStorage("userDefined",t.pages),common.getConfig(function(e){}),wx.pro.checkSession().then(function(){if(common.getAccessToken()){if(o.checkToken){o.checkToken=!1;var n=common.getStorage("userInfo");if(!n.avatar_url.original_url&&!n.displayname)return common.getPersonInfo().then(function(o){common.ewmOpenWin(e)})}}else console.log("no token");o.refresh(e)}).catch(function(n){o.refresh(e)})},refresh:function(e){common.getToken().then(function(o){common.getPersonInfo().then(function(o){common.ewmOpenWin(e),getApp().globalData.tokenUpdated()})})},onError:function(e){util.notifyError(e)},globalData:{userInfo:null,phoneModal:{isIphone:!1},acid:common.getExtConfig().acid,peise:common.getExtConfig().colors,tokenUpdated:null,commonFun:require("utils/common.js"),utilFun:require("utils/util.js"),dataTempFun:require("utils/dataTemp.js"),inputFun:require("utils/inputEvent.js"),phoneFun:require("utils/phoneEvent.js"),payEvent:require("utils/payEvent.js"),payTemp:require("utils/payTemp.js"),hdcategoryId:0,mallcategoryId:0,newscategoryId:0,groupid:0,awardsConfig:{},audioData:{audioId:null,lastAudioId:null,isStop:!1},dcOrderDetailIndex:-1,shopOrderDetailIndex:-1,hdOrderDetailIndex:-1,hbcDetailIndex:-1,walletReach:!1}});