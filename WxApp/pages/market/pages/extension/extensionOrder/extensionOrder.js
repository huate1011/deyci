"use strict";var common=getApp().globalData.commonFun,util=getApp().globalData.utilFun,extensionCenterTemp=require("../../../../commonPage/extension/comfunc.js");Page({data:{interfaceName:"extensionOrder",contactStatus:!0,requestStatus:!1,logoPosBottom:!0,list:[],orderCount:0,orderMoney:0,tgDataDetail:{},currentTab:0,navStatus:!1},state:{limit:10,offset:0,hasmore:!0,uid:0,option:{}},onLoad:function(t){if(t.hasOwnProperty("type")){var e=0;"cpr"===t.type&&(e=1),this.setData({navStatus:!1,currentTab:e}),this.state.uid=t.uid}else this.setData({navStatus:!0});this.state.option=t,wx.showLoading({title:"加载中...",mask:!0}),extensionCenterTemp.tuiguangInfo(this),this.getTgOrder(0),common.commonFun(this)},getTgOrder:function(t){var e=this,a="/sales/order/?uid="+this.state.uid+"&acid="+getApp().globalData.acid+"&offset="+t+"&limit="+this.state.limit;0===Number(this.data.currentTab)&&(a+="&type=cps"),1===Number(this.data.currentTab)&&(a+="&type=cpr");var s=this.state.option;s.hasOwnProperty("oldId")&&(a+="&ids="+s.oldId),util.httpRequest(a).then(function(a){wx.hideLoading();var s=common.dataListHandle(e,a,e.data.list,t);e.setData({list:s.list,requestStatus:!0,hasNext:s.hasNext})})},swichNav:function(t){var e=t.currentTarget.dataset.current;Number(e)!==Number(this.data.currentTab)&&(wx.showLoading({title:"加载中...",mask:!0}),this.setData({list:[],requestStatus:!1,currentTab:e}),this.state.offset=0,this.getTgOrder(0))},onPullDownRefresh:function(){wx.showLoading({title:"加载中...",mask:!0}),this.state.offset=0,this.getTgOrder(0)},onReachBottom:function(){this.state.hasmore&&(wx.showLoading({title:"加载中...",mask:!0}),this.state.offset=this.state.offset+this.state.limit,this.getTgOrder(this.state.offset))}});