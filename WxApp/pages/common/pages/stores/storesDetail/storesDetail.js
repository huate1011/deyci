"use strict";var common=getApp().globalData.commonFun,util=getApp().globalData.utilFun,WxParse=require("../../../../../wxParse/wxParse.js");Page({data:{alterHidden:"hide",detail:{},logoPosBottom:!1,playState:""},state:{offset:0,limit:10,hasmore:!0},onLoad:function(t){wx.showLoading({title:"加载中...",mask:!0});var a=this;common.getAccessToken()?(common.commonFun(a),a.getData(t)):getApp().globalData.tokenUpdated=function(){console.log("update success"),common.commonFun(a),a.getData(t)}},getData:function(t){var a="/api/BranchToClient/BranchDetails?id="+t.id,e=this;util.httpRequest(a,{},"GET","v2").then(function(a){wx.hideLoading(),"success"===a.result?(a.data.types=t.type,e.setData({detail:a.data}),wx.pro.fromSync(function(t){if(a.data.details){var o=WxParse.wxParse("article","html",a.data.details,e,5);e.setData(o)}})):common.showClickModal(a.msg)})},housemakePhoneCall:function(t){var a=t.currentTarget.dataset.index;common.phoneCall(a)},includePoints:function(){var t=this.data.detail;t.lng&&t.lat?common.openMap(t.lat,t.lng):common.showClickModal("导航地址出错")},topIndex:function(t){wx.switchTab({url:"/pages/index/page0/page0"})},belonghouse:function(){var t=this.data.detail,a="";0===Number(t.type)?a=t.id:1===Number(t.type)?a=t.uid:2===Number(t.type)&&(a=t.phone),wx.navigateTo({url:"/pages/house/pages/userPublish/userPublish?type="+t.type+"&key="+a})},onShareAppMessage:function(t){var a=this.data.detail,e=this.data.myInfo.id;return{title:a.name,path:"pages/common/pages/stores/storesDetail/storesDetail?id="+a.id+"&uid="+e}}});