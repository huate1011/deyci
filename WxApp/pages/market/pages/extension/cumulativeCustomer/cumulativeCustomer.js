"use strict";var common=getApp().globalData.commonFun,util=getApp().globalData.utilFun,extensionCenterTemp=require("../../../../commonPage/extension/comfunc.js");Page({data:{interfaceName:"cumulativeCustomer",contactStatus:!0,requestStatus:!1,logoPosBottom:!0,navIndex:0,list:[],activeCount:0,expiredCount:0,oldId:0},state:{limit:10,offset:0,hasmore:!0,options:{}},onLoad:function(t){wx.showLoading({title:"加载中...",mask:!0}),this.state.options=t,this.getKehuList(0),common.commonFun(this)},getKehuList:function(t){var s=this,e=this.state.options,o=0,i="/sales/customer/?acid="+getApp().globalData.acid+"&offset="+t+"&limit="+this.state.limit;e.hasOwnProperty("id")&&(i+="&ids="+e.id,o=e.id),util.httpRequest(i).then(function(e){var i=common.dataListHandle(s,e,s.data.list,t);s.store({list:i.list,requestStatus:!0,hasNext:i.hasNext,oldId:o}),wx.hideLoading()})},onPullDownRefresh:function(){wx.showLoading({title:"加载中...",mask:!0}),this.state.offset=0,this.getKehuList(this.state.offset)},onReachBottom:function(){this.state.hasmore&&(wx.showLoading({title:"加载中...",mask:!0}),this.state.offset=this.state.offset+this.state.limit,this.getKehuList(this.state.offset))},store:function(t){this.setData(t)}});