"use strict";var common=getApp().globalData.commonFun,util=getApp().globalData.utilFun;Page({data:{interfaceName:"zhuanlanDetailShare",currentTab:0,navList:[],invitationCard:""},state:{offset:0,limit:10},onLoad:function(t){common.commonFun(this),this.state.id=t.id,this.getTemplateList(t.id)},swichNav:function(t){var a=t.target.dataset.id,i=parseInt(t.currentTarget.dataset.current);this.data.currentTab!==i&&(this.setData({currentTab:i}),this.getInvitationCard(a))},getTemplateList:function(t){wx.showLoading({title:"加载中...",mask:!0});var a=this,i=[],e="/product/"+t+"/card_template/?offset=0&limit=10";util.httpRequest(e).then(function(a){i=a.results;var e="/product/"+t+"/card/?template_id="+a.results[0].id+"&type=1";return util.httpRequest(e)}).then(function(t){a.setData({navList:i,invitationCard:t.original_url}),wx.hideLoading()})},getInvitationCard:function(t){var a=this;wx.showLoading({title:"邀请函生成中...",mask:!0});var i="/product/"+this.state.id+"/card/?template_id="+t+"&type=1";util.httpRequest(i).then(function(t){a.setData({invitationCard:t.original_url}),wx.hideLoading()})},viewBigPic:function(t){common.seeBigImg(1,t.currentTarget.dataset.url)},invitationDesc:function(){wx.showModal({title:"邀请函须知",content:"点击查看大图后长按保存邀请函图片",showCancel:!1,success:function(t){}})}});