"use strict";var common=getApp().globalData.commonFun,util=getApp().globalData.utilFun;Page({data:{interfaceName:"giveFriends",giftVal:""},state:{},onLoad:function(t){this.state.cardId=t.cardid,common.commonFun(this)},onReady:function(){wx.showLoading({title:"加载中...",mask:!0}),this.getGiveDetail()},onShareAppMessage:function(t){if("button"===t.from){var a=this.data.giveDetail;return this.sureGiveGift(),{path:"pages/zhuanlan/pages/receiveGift/receiveGift?cardId="+a.id+"&colid="+a.objId,success:function(t){wx.navigateBack({delta:1})},fail:function(t){console.log(t)}}}return wx.hideShareMenu()},store:function(t){this.setData(t)},giftSay:function(t){this.store({giftVal:t.detail.value})},getGiveDetail:function(){var t=this,a="/giftcard/"+this.state.cardId+"/";util.httpRequest(a).then(function(a){wx.hideLoading(),t.store({giveDetail:a})})},sureGiveGift:function(){wx.showLoading({title:"",mask:!0});var t=this,a=this.data.giftVal;common.isNull(a)&&(a="这个内容给了我启发，希望也能帮到你");var i={message:a},e="/giftcard/"+this.state.cardId+"/";util.httpRequest(e,i,"POST").then(function(a){wx.hideLoading(),t.store({giftVal:""})})},jumpColumn:function(){var t=this.data.giveDetail,a=t.product.main_link.split("_");wx.navigateTo({url:"/pages/zhuanlan/pages/zhuanlanDetail/zhuanlanDetail?zhuanlanId="+a[1]})}});