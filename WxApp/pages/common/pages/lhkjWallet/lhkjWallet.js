"use strict";var common=getApp().globalData.commonFun,app=getApp();Page({data:{alterHidden:"hide",interfaceName:"lhkjWallet",payModal:!0,keyboardTk:!0,playWords:[],passKeyWords:["","","","","",""],acInfo:{displayname:""},walletInfo:{amount:"",hdh:{displayname:""},user:{displayname:""},time:""},withdraw_no:""},onLoad:function(a){wx.showLoading({title:"加载中...",mask:!0});var t=common.getStorage("walletHdhInfo");common.commonFun(this),this.setData({withdraw_no:a.withdraw_no}),t?this.setData({acInfo:t}):this.getHdhInfo(),this.getWalletInfo(1),app.globalData.walletReach=!0},getWalletInfo:function(a){var t=this;wx.showLoading({title:1===a?"数据获取中...":"正在提交..."});var o={type:1===a?"query":"weixin",withdraw_no:t.data.withdraw_no};2===a&&(o.paypass=t.data.playWords),wx.pro.request({url:"/wallet/withdraw/",data:o,method:"POST"}).then(function(o){wx.hideLoading(),"success"===o.result?1===a?t.setData({walletInfo:o.withdraw}):2===a&&wx.showModal({title:"提示",content:"提现成功,请注意查收",showCancel:!1,success:function(a){a.confirm&&wx.redirectTo({url:"/pages/common/pages/myWallet/myWallet"})}}):common.showClickModal(o.msg)})},getHdhInfo:function(){var a=this;wx.pro.request({url:"/hdh/1/",data:{},method:"GET"}).then(function(t){common.setStorage("walletHdhInfo",t),a.setData({acInfo:t})})},getPassValue:function(a){var t=this.data.playWords,o=this.data.passKeyWords,e=t.length,s=a.target.dataset.number;"12"===s&&e>0?(e-=1,t=t.substr(0,e),o[e]="",this.setData({playWords:t,passKeyWords:o})):"12"!==s&&"11"!==s&&e<6&&(t+=s,o[e]="*",this.setData({playWords:t,passKeyWords:o}),e+=1),6===e&&(this.getWalletInfo(2),this.hideModalBox())},showModalBox:function(){this.setData({payModal:!1})},hideModalBox:function(){this.setData({payModal:!0,playWords:[],passKeyWords:["","","","","",""]})},showKeyboard:function(){this.setData({keyboardTk:!1})},hideKeyboard:function(){this.setData({keyboardTk:!0})},forGetPass:function(a){common.showClickModal("请前往对应小程序找回")},payBtn:function(){this.getWalletInfo(2),this.hideModalBox()}});