"use strict";var page1=require("../common/danpinDetail.js").buildPage();page1.config=function(){this.state.detailType="audeo"},page1.audioPlay=function(a){if(!wx.getBackgroundAudioManager)return void wx.showModal({title:"提示",content:"当前微信版本过低，请升级至高版本",showCancel:!1});var t=this,i=wx.getBackgroundAudioManager(),n=t.data.detail.id===getApp().globalData.audioData.lastAudioId||!1;if(i.onEnded(function(){t.store({playStatus:"https://www.haojian.cn/wximg/zhuanlan/stop.png",playAction:"audioPlay",isPlayingMusic:!1,starttime:t.data.detail.duration}),getApp().globalData.audioData.isStop=!0}),i.paused&&n&&(0===i.duration||getApp().globalData.audioData.isStop?(i.startTime=0,i.title=t.data.detail.title,i.src=t.data.detail.content.original_url):i.play()),!i.src||""===i.src||!n){var e=t.data.detail;if(!e.has_bought&&!e.is_preview)return void wx.showModal({title:"提示",content:"无试听内容，请先订阅",showCancel:!1});i.title=t.data.detail.title,i.src=t.data.detail.content.original_url}!i.paused&&n&&a&&(i.src=t.data.detail.content.original_url),getApp().globalData.audioData.isStop=!1,t.store({playStatus:"https://www.haojian.cn/wximg/zhuanlan/play.png",playAction:"audioPause",isPlayingMusic:!0}),i.onTimeUpdate(function(){var a=parseInt(i.currentTime),n=i.duration,e=parseInt(a/60),o=parseInt(n),l=a%60;e=e<10?"0"+e:e,l=l<10?"0"+l:l;var u=e+":"+l;t.store({CurrentTime:a,starttime:u,max:o})}),i.onPause(function(){t.store({playStatus:"https://www.haojian.cn/wximg/zhuanlan/stop.png",playAction:"audioPause"})}),i.onPlay(function(){t.store({playStatus:"https://www.haojian.cn/wximg/zhuanlan/play.png",playAction:"audioPause"})}),getApp().globalData.audioData.lastAudioId=t.data.detail.id},page1.audioPause=function(){if(!wx.getBackgroundAudioManager)return void wx.showModal({title:"提示",content:"当前微信版本过低，请升级至高版本",showCancel:!1});var a=wx.getBackgroundAudioManager();a.paused?(a.play(),this.store({playStatus:"https://www.haojian.cn/wximg/zhuanlan/play.png",playAction:"audioPlay"})):(a.pause(),this.store({playStatus:"https://www.haojian.cn/wximg/zhuanlan/stop.png",playAction:"audioPlay"}))},page1.sliderchange=function(a){if(!wx.getBackgroundAudioManager)return void wx.showModal({title:"提示",content:"当前微信版本过低，请升级至高版本",showCancel:!1});var t=parseInt(a.detail.value);wx.getBackgroundAudioManager().seek(t)},page1.funended=function(){},Page(page1);