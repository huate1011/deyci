"use strict";var dataTemp=getApp().globalData.dataTempFun,common=getApp().globalData.commonFun;Page({data:{interfaceName:"newMovement",contactStatus:!0,isFixed:!0,iconStatus:!0,info:{activeIndex:0,navList:[],tab:"",navStyle:"",toView:"category_0"},requestStatus:!1,showGoTop:!1},state:{pageOnShow:!1,isOnReachBottom:!0,hasmore:!0,offset:0,limit:10},tabOffsetTop:null,onLoad:function(t){wx.showLoading({title:"加载中...",mask:!0}),this.state.options=t;var e=this;common.getAccessToken()?dataTemp.newsNavList(e):getApp().globalData.tokenUpdated=function(){console.log("update success"),dataTemp.newsNavList(e)}},onShow:function(){var t=this;getApp().globalData.newMovementCallback=function(e,o,a){var s=t.data.list;s[e]&&(a?(s[e].comment_count=a.comment_count,s[e].like_count=a.like_count,s[e].views=a.views,t.store({list:s})):dataTemp.getNewsDetail(t,s[e].id,e))}},onPullDownRefresh:function(){this.state.isonPullDownRefresh=!0,wx.showLoading({title:"加载中...",mask:!0}),dataTemp.newMovementList(this,0)},onReachBottom:function(){this.state.isonPullDownRefresh||this.state.isOnReachBottom&&this.state.hasmore&&(wx.showLoading({title:"加载中...",mask:!0}),this.state.offset=this.state.offset+this.state.limit,dataTemp.newMovementList(this,this.state.offset),this.state.isOnReachBottom=!1)},store:function(t){this.setData(t)},onPageScroll:function(t){common.scrollIsTabFixed(this,t),common.goTopEvent(this,t.scrollTop)},onShareAppMessage:function(){return{path:"pages/newMovement/pages/newMovement/newMovement?&category_id="+this.state.categoryid,success:function(t){},fail:function(t){}}}});