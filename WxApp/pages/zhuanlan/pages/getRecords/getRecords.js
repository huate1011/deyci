"use strict";var common=getApp().globalData.commonFun,util=getApp().globalData.utilFun;Page({data:{interfaceName:"getRecords",getRecords:[],requestStatus:!1},state:{offset:0,limit:10,hasmore:!0,isOnReachBottom:!1,pageOnShow:!1},onLoad:function(t){this.store({id:t.id}),wx.showLoading({title:"加载中...",mask:!0}),this.getReceiveList(0),common.commonFun(this)},onShow:function(){this.state.pageOnShow&&this.getReceiveList(this.state.offset)},onPullDownRefresh:function(){this.state.isonPullDownRefresh=!0,wx.showLoading({title:"加载中...",mask:!0}),this.store({getRecords:[]}),this.state.offset=0,this.getReceiveList(0)},onReachBottom:function(){this.state.isonPullDownRefresh||this.state.isOnReachBottom&&this.state.hasmore&&(wx.showLoading({title:"加载中...",mask:!0}),this.state.offset+=this.state.limit,this.getReceiveList(this.state.offset),this.state.isOnReachBottom=!1)},store:function(t){this.setData(t)},getReceiveList:function(t){var e=this,s=this.data.getRecords,i="/hdh/"+common.getExtConfig().acid+"/giftrecord/?offset="+t+"&limit="+this.state.limit+"&ids="+this.data.id;util.httpRequest(i).then(function(i){wx.hideLoading();var o=common.dataListHandle(e,i,s,t);e.store({getRecords:o.list,requestStatus:!0})})}});