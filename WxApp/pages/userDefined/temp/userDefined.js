"use strict";function setNavigationBarColor(t,o){}function slideimgsImgLoad(t){var o=this.data.info,e=t.target.dataset.index,a=t.target.dataset.imgindex,i=t.target.dataset.types;if(0===Number(a)){var n=wx.getSystemInfoSync().windowWidth;n&&Number(n)>0&&("w"===i&&o.temp[e].data.list.forEach(function(t,a){o.temp[e].data.list[a].width*=Number(n)/320}),o.temp[e].data.height*=Number(n)/320)}this.store({info:o})}function getLayout(t,o,e){var a="/uipage/"+o+"/detail/";util.httpRequest(a).then(function(o){if(o.hasOwnProperty("id")){var a=o.layout;common.setStorage("layout",o.layout),t.state.page_color=o.color,t.state.page_bgcolor=o.bgcolor,t.state.page_title=o.title,wx.setNavigationBarTitle({title:o.title}),t.state.pageOnShow=!0;var i=t.data.info;i.bgcolor=o.bgcolor,i.bgimg=o.bgimg,i.advert=o.advert,setNavigationBarColor(o.color,o.bgcolor),e(a)}t.slideimgsImgLoad=slideimgsImgLoad}).catch(function(t){common.prompt(t.statusCode,t.message)})}function isShowAudeoPlay(t){if(wx.getBackgroundAudioManager){var o=wx.getBackgroundAudioManager();!1===o.paused||0===o.paused?t.setData({audeo_play_status:!0}):t.setData({audeo_play_status:!1}),o.onPause(function(){console.log("onPause"),t.setData({audeo_play_status:!1})}),o.onPlay(function(){console.log("onPlay"),t.setData({audeo_play_status:!0})}),o.onEnded(function(o){console.log("onEnded"),t.setData({audeo_play_status:!1})})}}function submitForm(t,o,e){var a=o.name,i=o.phone,n=o.custom1,s=o.custom2;return common.isNull(a)?void common.showTimeToast("请填写名称"):common.isNull(i)?void common.showTimeToast("请填写电话"):1===t.open1&&common.isNull(n)?void common.showTimeToast("请填写"+t.name1):1===t.open2&&common.isNull(s)?void common.showTimeToast("请填写"+t.name2):void e(o)}function reportFuc(t,o,e,a){var i=e.currentTarget.dataset.index;wx.showLoading({title:"信息提交中...",mask:!0});var n="/uipage/"+o+"/form/";util.httpRequest(n,t,"POST").then(function(t){if(wx.hideLoading(),"success"===t.result){common.showClickModal("信息提交成功！");var o=a.data.info;o.temp[i].data.val=["","","",""],a.setData({info:o})}else common.showClickModal(t.msg)})}function getCountDown(t,o){o.state.time=setInterval(function(){t.forEach(function(e,a){if(e.hasOwnProperty("seckilling")){var i=e.price+"",n=e.seckilling.price+"";t[a].chaPrice=(Number(i)-Number(n)).toFixed(2);var s=n.split(".");t[a].seckilling.price1=s[0],t[a].seckilling.price2="00",2===s.length&&(t[a].seckilling.price2=s[1]);var u=e.seckilling.applicable_condition.valid_from,l=util.formatTimeStamp(u),r=Date.parse(new Date);if(t[a].tiemStatus=0,Number(l-r)>0)t[a].tiemStatus=1;else{var m=common.timeCountDown(o,e.seckilling.applicable_condition.valid_through);0===Number(m.hour)&&0===Number(m.minute)&&0===Number(m.second)?(t[a].tiemStatus=2,t[a].seckilling.stock_count=0):(t[a].day=m.day,t[a].hour=m.hour,t[a].minute=m.minute,t[a].second=m.second)}}}),o.store({msList:t})},1e3)}var common=getApp().globalData.commonFun,util=getApp().globalData.utilFun;module.exports={getLayout:getLayout,submitForm:submitForm,reportFuc:reportFuc,setNavigationBarColor:setNavigationBarColor,isShowAudeoPlay:isShowAudeoPlay,getCountDown:getCountDown};