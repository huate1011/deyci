"use strict";var common=getApp().globalData.commonFun,util=getApp().globalData.utilFun,temp=require("../formOrder/temp.js");Page({data:{interfaceName:"form_order_detail",payAndBingPhoneStatus:!1,requestStatus:!1,details:"",nbPhone:!0,phone:"",btnPhoneNumber:!1},state:{options:""},onLoad:function(t){var e=this;common.payAndBingPhoneSetData(e,function(t){e.setData({payAndBingPhoneStatus:!0})}),this.state.options=t,temp.loadFun(this),this.getDetailInfo(t.id),common.getAccessToken()?(common.commonFun(e),common.getWallet(e)):getApp().globalData.tokenUpdated=function(){console.log("update success"),common.commonFun(e),common.getWallet(e)}},onUnload:function(){var t=this.state.options;t.hasOwnProperty("index")&&getApp().globalData.formUpdateCallback(t.index)},store:function(t){this.setData(t)},getDetailInfo:function(t){var e=this,a="/form/order/"+t;util.httpRequest(a).then(function(t){"success"===t.result?e.store({details:t.detail,requestStatus:!0}):common.showClickModal(t.msg),wx.hideLoading()})},viewBigPic:function(t){var e=t.currentTarget.dataset.index,a=t.currentTarget.dataset.url,o=this.data.details.inputs[e].answer;common.seeBigImg(2,a,o)},formOrderDel:function(t){var e=this,a=this.data.details;temp.delOrder(a.id,function(t){if("success"===t){var a=e.state.options;a.hasOwnProperty("index")&&getApp().globalData.formDeleteCallback(a.index),wx.navigateBack({})}})},payOrder:function(t){var e=this.data.details,a=e.orderPrice;this.state.shopOrderId=e.shopOrderId,this.store({showPayMethod:!0,total_money:a,payId:0,payMethod:["success","circle"]})}});